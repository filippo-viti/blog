{% extends 'base.html.twig' %}
{% block title %}Blogs{% endblock %}
{% block body %}
<div class="container-fluid mx-2">

    {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}
    <div class="form-group d-flex align-items-center justify-content-between row mt-4">
        {{ form_label(form.category, 'Category:', {'attr': {'class': 'col-sm-2 col-form-label'}}) }}
        <div class="col-sm-10">
            {{ form_widget(form.category)}}
        </div>
        <div class="col-sm-1">
            {{ form_widget(form.submit)}}
        </div>
    </div>

    {{ form_end(form) }}
    <div class="row mt-2 d-flex justify-content-around">

        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}

        {% if blogs %}
            {% for blog in blogs %}
                <div class="card mb-4" style="width: 18rem;">
                    {% if blog.image %}
                        {# immagine trovata, visualizzala #}
                        <img src="{{img_dir}}{{blog.image}}" class="" alt="{{blog.title}}">
                    {% else %}
                        {# immagine non trovata, visualizza immagine default #}
                        <img src="{{img_dir}}default.png" class="img-fluid rounded" alt="Default image">
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{blog.title}}</h5>
                        <p class="card-text">{{blog.shortDescription}}</p>
                        <a href="{{path('app_blog_read', {id: blog.id})}}" class="btn btn-primary">Read more</a>
                        <a href="{{path('app_blog_edit', {id: blog.id})}}" class="btn btn-primary">Edit</a>
                        <a href="{{path('app_blog_delete', {id: blog.id})}}" class="btn btn-danger">Delete</a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
        There are no blogs in this category
        {% endif %}

    </div>
</div>


{% endblock %}